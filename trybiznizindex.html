<!DOCTYPE html>
<html lang="tl">
<head>
<meta charset="UTF-8">
<title>Watch	 & Earn PH ‚Äì Business Ultra</title>
<meta	 name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="monetag" content="f6cd6220dde78c27df43aa4d5f91b623">
<meta http-equiv="refresh" content="350; url=https://echozoneph-viewers-watchtoearn2026.netlify.app/yindex.html">

<!-- SUPABASE -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
<script>
const supabaseUrl = "https://latimgzxirdlcetikufy.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxhdGltZ3p4aXJkbGNldGlrdWZ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzODI1NDksImV4cCI6MjA4Mzk1ODU0OX0.wfrJkLAmrn895meab65kMdsRWNapPrvWiiw8cdDCNUY";
const supabaseClient = window.supabase.createClient(supabaseUrl, supabaseKey);
</script>

<!-- MONETAG POPUNDER -->
<script>
(function(s){s.dataset.zone='10587611',s.src='https://al5sm.com/tag.min.js'})
([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))
</script>

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#0b0b0b;color:#fff}
.container{max-width:1000px;margin:auto;padding:20px;text-align:center}
.box{background:#111;padding:15px;border-radius:12px;margin-bottom:15px}
button{padding:10px 15px;border:none;border-radius:8px;cursor:pointer;font-weight:bold}
button:disabled{background:#555;cursor:not-allowed}
input,select{padding:10px;width:100%;max-width:320px;margin:5px;border-radius:8px;border:none}
.green{color:#00ff88}
.red{color:#ff6666}
.progress{width:100%;height:12px;background:#333;border-radius:10px;overflow:hidden}
.progress div{height:100%;background:#00ff88;width:0}
.card{background:#0f0f0f;padding:10px;border-radius:10px;margin-bottom:6px;text-align:left;font-size:14px}
.hidden{display:none}
iframe{width:100%;max-width:850px;height:460px;border-radius:12px}
.vip{background:linear-gradient(45deg,#ffd700,#ffae00);color:#000}
.admin{background:#ff4444}
</style>
</head>
<body>
<div class="container">

<h2>üé¨ Watch & Earn PH</h2>
<h3 id="planLabel">BASIC PLAN</h3>

<div class="box">
üí∞ Balance: ‚Ç±<span id="balance">0.00</span>
<div class="progress"><div id="withdrawProgress"></div></div>
<small>Minimum withdrawal ‚Ç±50</small><br>
<button id="withdrawBtn" disabled>Mag-Withdraw</button>
</div>

<div id="login" class="box">
<select id="userSelect"></select><br>
<input id="password" type="password" placeholder="Ilagay ang password">
</div>

<div id="lockMsg" class="red"></div>

<div id="refBox" class="box hidden">
<h3>üë• Referrer Username</h3>
<input id="refUsername" placeholder="Username ng nag-invite">
<button id="saveRef">I-save</button>
<div id="refMsg" class="green"></div>
</div>

<div id="vipBox" class="box hidden">
<h3>‚≠ê VIP MEMBERSHIP</h3>
<p>‚úî No ads<br>‚úî Double rewards<br>‚úî 12 videos/day</p>
<button class="vip" onclick="upgradeVIP()">Upgrade VIP ‚Ç±99 / 30 days</button>
<div id="vipMsg" class="green"></div>
</div>

<div id="playerArea"></div>
<div class="progress"><div id="videoProgress"></div></div>
<div id="timer"></div>
<div id="earned" class="green"></div>

<div class="box">
üéÅ Daily Bonus: <span id="dailyBonus" class="green"></span><br>
üé¨ Napanood ngayon: <span id="watchedCount">0</span>/<span id="dailyLimit">6</span><br>
‚è≥ Susunod na reset sa: <span id="countdown"></span>
</div>

<div class="box"><h3>üìä Kasaysayan ng Kita</h3><div id="earnHistory"></div></div>
<div class="box"><h3>üì§ Kasaysayan ng Withdrawal</h3><div id="withdrawHistory"></div></div>

<div id="withdrawModal" class="box hidden">
<button onclick="confirmWithdraw('GCash')">GCash</button>
</div>

<div id="extraGame" class="box hidden">
<h3>üÉè Extra Game: Scratch & Win</h3>
<p>Scratch the card to win bonus!</p>
<div id="scratchCard" style="width:200px;height:100px;background:#444;border-radius:10px;cursor:pointer">Scratch Here</div>
<div id="extraReward" class="green"></div>
<button onclick="closeExtraGame()">Close</button>
</div>

<div class="box" style="margin-top:10px;">
<script async src="https://nap5k.com/tag.min.js"></script>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
const USERS={
user1:{pass:"dipwd1234",role:"user"},
Jeryanroyate:{pass:"101017",role:"user"},
user3:{pass:"dipwdadmin123",role:"admin"}
};
const VIDEO_POOL=["fjy1wYj2Nh8","tUMXTD8STeU","ZspGPko6-1w","JATpLtghZCY"];
const DAILY_LIMIT_BASIC=6;
const DAILY_LIMIT_VIP=12;
const MIN_WITHDRAW=50;

let currentUser,data,player,ytReady=false;
let dailyVideos=[],videoIndex=0,adWatched=true;
let countdownInt;

const today=()=>new Date().toDateString();
const tomorrow=()=>{let d=new Date();d.setHours(24,0,0,0);return d;}
const rand=(a,b)=>+(Math.random()*(b-a)+a).toFixed(2);
const shuffle=a=>{for(let i=a.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a;}

window.onload=()=>{
 Object.keys(USERS).forEach(u=>{
  let o=document.createElement("option");
  o.value=u;o.textContent=u;
  userSelect.appendChild(o);
 });
};

function onYouTubeIframeAPIReady(){ytReady=true;}

password.onkeypress=async e=>{
 if(e.key!=="Enter") return;
 let u=userSelect.value;
 if(password.value!==USERS[u].pass){alert("Mali ang password");return;}
 currentUser=u;
 login.remove();
 refBox.classList.remove("hidden");
 vipBox.classList.remove("hidden");
 await loadData();
 await dailyReset();
 await claimDailyBonus();
 loadReferral();
 render();
};

async function loadData(){
 const {data:row}=await supabaseClient.from("users").select("data").eq("username",currentUser).single();
 if(!row){
  data={total:0,earn:[],withdraw:[],watchedToday:[],dailyVideos:[],lastDate:null,lastBonus:null,refUser:null,refReward:0,bonusVideo:null,plan:"basic",accountStatus:"active"};
  await supabaseClient.from("users").insert({username:currentUser,data});
 }else data=row.data;
 data.plan=data.plan||"basic";
 data.accountStatus=data.accountStatus||"active";
}
async function save(){await supabaseClient.from("users").update({data}).eq("username",currentUser);}

function upgradeVIP(){vipMsg.textContent="Please send GCash ‚Ç±99 and contact admin";}

function loadReferral(){
 if(data.refUser){refUsername.value=data.refUser;refUsername.disabled=true;saveRef.disabled=true;}
}
saveRef.onclick=async ()=>{
 if(data.refUser) return;
 let r=rand(0.1,2);
 data.refUser=refUsername.value;
 data.refReward=r;
 data.total+=r;
 data.earn.push({type:"Invite Reward",amount:r,time:new Date().toLocaleString()});
 await save(); render();
 refUsername.disabled=true; saveRef.disabled=true;
 refMsg.textContent="‚Ç±"+r+" nadagdag";
}

async function dailyReset(){
 if(data.lastDate!==today()){
  data.lastDate=today();
  data.watchedToday=[];
  videoIndex=0;
  let limit=(data.plan==="vip"?DAILY_LIMIT_VIP:DAILY_LIMIT_BASIC);
  dailyVideos=shuffle([...VIDEO_POOL]).slice(0,limit);
  data.dailyVideos=dailyVideos;
  data.bonusVideo=dailyVideos[Math.floor(Math.random()*dailyVideos.length)];
 }
 dailyVideos=data.dailyVideos||[];
 await save();
 if(dailyVideos.length>0){loadVideo();startCountdown();}
}

async function claimDailyBonus(){
 if(data.lastBonus===today()){dailyBonus.textContent="Claimed"; return;}
 let b=rand(0.01,0.10);
 data.lastBonus=today();
 data.total+=b;
 data.earn.push({type:"Daily Bonus",amount:b,time:new Date().toLocaleString()});
 await save();
 dailyBonus.textContent="‚Ç±"+b;
}

function loadVideo(){
 if(!dailyVideos || !dailyVideos[videoIndex]){lockMsg.textContent="No video today"; return;}
 if(!ytReady){setTimeout(loadVideo,500);return;}
 watchedCount.textContent=data.watchedToday.length;
 playerArea.innerHTML="<div id='player'></div>";
 player=new YT.Player("player",{videoId:dailyVideos[videoIndex],playerVars:{autoplay:1,controls:0},
  events:{onStateChange:e=>{if(e.data===YT.PlayerState.ENDED) reward()}}
 });
}

async function reward(){
 let r=(dailyVideos[videoIndex]===data.bonusVideo)?0.50:(data.plan==="vip"?rand(0.4,0.9):rand(0.05,0.2));
 data.total+=r;
 data.watchedToday.push(dailyVideos[videoIndex]);
 data.earn.push({type:"Video",amount:r,time:new Date().toLocaleString()});
 videoIndex++;
 await save(); render();
 earned.textContent="‚Ç±"+r+" nadagdag";
 setTimeout(loadVideo,1500);
}

withdrawBtn.onclick=()=>withdrawModal.classList.remove("hidden");
async function confirmWithdraw(method){
 data.withdraw.push({method,amount:data.total,time:new Date().toLocaleString()});
 data.total=0;
 await save(); render();
 withdrawModal.classList.add("hidden");
}

scratchCard.onclick=()=>{
 let reward=rand(0.1,1.0);
 data.total+=reward;
 data.earn.push({type:"Scratch Reward",amount:reward,time:new Date().toLocaleString()});
 extraReward.textContent="‚Ç±"+reward+" nadagdag!";
 save(); render();
};
function closeExtraGame(){extraGame.classList.add("hidden");}

function render(){
 balance.textContent=data.total.toFixed(2);
 withdrawBtn.disabled=(data.total<MIN_WITHDRAW);
 withdrawProgress.style.width=Math.min(data.total/MIN_WITHDRAW*100,100)+"%";
 earnHistory.innerHTML=data.earn.map(e