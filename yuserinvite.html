


<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>User Invite Panel</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>

<style>
body{
  background:#0b0b0b;
  color:#fff;
  font-family:Arial;
  text-align:center;
}

select,input,button{
  padding:12px;
  margin:8px;
  width:90%;
  max-width:320px;
  font-size:16px;
}
#panel{display:none;margin-top:20px}
</style>
</head>

<body>

<h2>User Invite Panel</h2>

<!-- ✅ DROPDOWN USERNAME -->
<select id="userSelect">
  
  <option value="">Select username</option>
</select>

<input id="password" type="password" placeholder="Password">
<button id="loginBtn">Login</button>

<div id="loginMsg"></div>

<div id="panel">
  <h3>Create Invite</h3>
  <input id="inviteUser" placeholder="New username">
  <button id="createBtn">Create Invite</button>
  <div id="msg"></div>
</div>

<!-- ✅ SCRIPT SA PINAKA-ILALIM -->
<script>
/* ================= USERS (PASSWORD NASA SCRIPT LANG) ================= */
const USERS = {
  Benggalleon041:"beng41",
  John:"101017",
  Delf:"230738",
  jonardbelleza:"251935",
  jaynegalleon:"jayne1",
  admin:"admin123"
};

/* ================= LOAD DROPDOWN ================= */
const userSelect = document.getElementById("userSelect");

Object.keys(USERS).forEach(username=>{
  const opt = document.createElement("option");
  opt.value = username;
  opt.textContent = username;
  userSelect.appendChild(opt);
});

/* ================= SUPABASE (INVITES ONLY) ================= */
const supabase = window.supabase.createClient(
  "https://latimgzxirdlcetikufy.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxhdGltZ3p4aXJkbGNldGlrdWZ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzODI1NDksImV4cCI6MjA4Mzk1ODU0OX0.wfrJkLAmrn895meab65kMdsRWNapPrvWiiw8cdDCNUY"
);

let currentUser = "";

/* ================= LOGIN ================= */
loginBtn.onclick = () => {
  const u = userSelect.value;
  const p = password.value;

  if(!u || !p){
    loginMsg.innerText = "Select username and enter password";
    return;
  }

  if(USERS[u] !== p){
    loginMsg.innerText = "Wrong password";
    return;
  }

currentUser = u;
  loginMsg.innerText = "Login success";
  panel.style.display = "block";
};

/* ================= CREATE INVITE ================= */
createBtn.onclick = async () => {
  if(!inviteUser.value){
    alert("Enter new username");
    return;
  }

const { error } = await supabase.from("invites").insert({
    inviter: currentUser,
    invite_username: inviteUser.value,
    status: "pending"
  });

  msg.innerText = error ? error.message : "Invite created (waiting admin approval)";
  inviteUser.value = "";
};
</script>

</body>
</html>