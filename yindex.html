<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Watch & Earn ph</title>

<style>
body{margin:0;font-family:Arial;background:#0b0b0b;color:#fff;text-align:center}
.container{max-width:900px;margin:auto;padding:20px}
.box{background:#111;padding:15px;border-radius:10px;margin-bottom:15px}
.green{color:#00ff88}
button{padding:10px 15px;border:none;border-radius:6px;cursor:pointer}
button:disabled{background:#555}
input,select{padding:10px;width:100%;max-width:300px}
.progress{width:100%;height:12px;background:#333;border-radius:10px;overflow:hidden;margin-top:5px}
.progress div{height:100%;background:#00ff88;width:0}
iframe{width:100%;max-width:800px;height:450px;border-radius:10px}
.card{background:#111;padding:10px;border-radius:8px;margin-bottom:8px;text-align:left}
.lock{color:#ff6666;font-size:18px}
.hidden{display:none}
</style>
</head>
<div class="container">

<div class="box">
üí∞ Balance: ‚Ç±<span id="balance">0.00</span><br>
<div class="progress"><div id="withdrawProgress"></div></div>
<small>Minimum ‚Ç±50</small><br><br>
<button id="withdrawBtn" disabled>Withdraw</button>
</div>

<h2>üé¨ Watch & Earn ph</h2>

<div id="login" class="box">
<select id="userSelect"></select><br><br>
<input id="password" type="password" placeholder="Password">
</div>
<div id="lockMsg" class="lock"></div>

<div id="playerArea"></div>
<div class="progress"><div id="videoProgress"></div></div>
<div id="timer"></div>
<div id="earned" class="green"></div>

<div class="box">
<h3>‚è≥ Next Reset In:</h3>
<div id="countdown"></div>
</div>
<div class="box">
<h3>üìä Earnings History</h3>
<div id="earnHistory"></div>
</div>

<div class="box">
<h3>üì§ Withdrawal History</h3>
<div id="withdrawHistory"></div>
</div>
<div id="withdrawModal" class="box hidden">
<h3>Select Method</h3>
<button onclick="confirmWithdraw('GCash')">GCash</button>
<button onclick="confirmWithdraw('Maya')">Maya</button>
</div>
<div id="adminPanel" class="box hidden">
<h3>üõ† Admin Panel</h3>
<label>Min Reward</label>
<input id="minReward" type="number" step="0.1"><br>
<label>Max Reward</label>
<input id="maxReward" type="number" step="0.1"><br><br>
<button onclick="saveAdmin()">Save</button>
<button onclick="resetAll()">Reset All Users</button>
</div>
</div>
<script src="https://www.youtube.com/iframe_api"></script>
<script>
/* CONFIG */
const ADMIN_PASSWORD="admin123";
let rewardConfig=JSON.parse(localStorage.getItem("rewardCfg"))||{min:0.1,max:0.5};

/* USERS */
const USERS={user1:{pass:"1234"},user2:{pass:"abcd"},admin:{pass:ADMIN_PASSWORD}};
let currentUser,data;

/* VIDEOS */
const videos=["dQw4w9WgXcQ","9bZkp7q19f0"];
let player,vidIndex=0,timerInt;

/* INIT USERS */
Object.keys(USERS).forEach(u=>{
 let o=document.createElement("option");
 o.value=u;o.textContent=u;
 userSelect.appendChild(o);
});

/* DATE */
function today(){return new Date().toISOString().split("T")[0];}
function tomorrow(){
 let d=new Date();d.setDate(d.getDate()+1);
 d.setHours(0,0,0,0);return d;
}
/* LOGIN */
password.onkeypress=e=>{
 if(e.key==="Enter"){
  let u=userSelect.value;
  if(password.value!==USERS[u].pass) return alert("Wrong password");
  currentUser=u;
  if(u==="admin"){ adminPanel.classList.remove("hidden"); return; }
  loadData(); login.remove();
  dailyCheck(); render();
 }
};
/* DATA */
function loadData(){ data=JSON.parse(localStorage.getItem("user_"+currentUser))||
 {total:0,watched:[],earn:[],withdraw:[],lastDate:null,lastTime:null};
}
function save(){localStorage.setItem("user_"+currentUser,JSON.stringify(data));}

/* DAILY CHECK + ANTI CHEAT */
function dailyCheck(){
 let now=Date.now();
 if(data.lastTime && now<data.lastTime){
  lockMsg.textContent="‚ö†Ô∏è Time manipulation detected";
  return;
 }
data.lastTime=now;
 if(data.lastDate!==today()){
  data.watched=[];
  data.lastDate=today();
 }
 save();
 loadVideo();
 startCountdown();
}
/* REWARD */
function getReward(){
 return +(Math.random()*(rewardConfig.max-rewardConfig.min)+rewardConfig.min).toFixed(2);

/* VIDEO */
function loadVideo(){
 if(data.watched.length>=videos.length){
  lockMsg.textContent="üîí Come back tomorrow";
  return;
 }
 playerArea.innerHTML="<div id='player'></div>";
 player=new YT.Player("player",{
  videoId:videos[vidIndex],
  playerVars:{autoplay:1,controls:0},
  events:{onReady:startTimer,onStateChange:e=>{
   if(e.data===YT.PlayerState.ENDED) reward();
  }}
 });
}
/* TIMER */
function startTimer(){
 let wait=setInterval(()=>{
  let d=player.getDuration();
  if(d>0){clearInterval(wait);runTimer(d);}
 },200);
}
function runTimer(total){
 let t=total;
 timerInt=setInterval(()=>{
  timer.textContent=`‚è±Ô∏è ${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`;
  videoProgress.style.width=((total-t)/total*100)+"%";
  t--; if(t<0)clearInterval(timerInt);
 },1000);
}
/* REWARD APPLY */
function reward(){
 let r=getReward();
 data.total+=r;
 data.watched.push(videos[vidIndex]);
 data.earn.push({amount:r,time:new Date().toLocaleString()});
 save();
 earned.textContent="You earned ‚Ç±"+r;
 vidIndex++; render(); setTimeout(loadVideo,3000);
}
/* RENDER */
function render(){
 balance.textContent=data.total.toFixed(2);
 withdrawBtn.disabled=data.total<50;
 withdrawProgress.style.width=Math.min(data.total/50*100,100)+"%";
 earnHistory.innerHTML=data.earn.map(e=>`<div class="card">‚Ç±${e.amount}<br>${e.time}</div>`).join("");
 withdrawHistory.innerHTML=data.withdraw.map(w=>`<div class="card">${w.method} ‚Ç±${w.amount}<br>${w.time}</div>`).join("");
}
/* WITHDRAW */
withdrawBtn.onclick=()=>withdrawModal.classList.remove("hidden");
function confirmWithdraw(m){
 data.withdraw.push({method:m,amount:data.total,time:new Date().toLocaleString()});
 data.total=0; save(); render();
 withdrawModal.classList.add("hidden");
}
/* COUNTDOWN */
function startCountdown(){
 setInterval(()=>{
  let diff=tomorrow()-new Date();
  countdown.textContent=
   `${Math.floor(diff/3600000)}h ${Math.floor(diff%3600000/60000)}m`;
 },1000);
}

/* ADMIN */
function saveAdmin(){
 rewardConfig.min=+minReward.value;
 rewardConfig.max=+maxReward.value;
 localStorage.setItem("rewardCfg",JSON.stringify(rewardConfig));
 alert("Saved");
}
function resetAll(){
 Object.keys(localStorage).forEach(k=>k.startsWith("user_")&&localStorage.removeItem(k));
 alert("All users reset");
}
</script>
</body>
</html>