
/* üîë LOGIN */
document.getElementById("password").addEventListener("keypress", e => {
    if (e.key === "Enter") {
        if (e.target.value === PASSWORD) {
            document.getElementById("login").remove();
            updateBalance();
            renderHistory();
            loadVideo();
        } else {
alert("Maling password");
            e.target.value = "";
        }
    }
});

/* üé≤ RANDOM REWARD (‚Ç±0.1 ‚Äì ‚Ç±0.5) */
function getRandomReward() {
    return parseFloat((Math.random() * (0.5 - 0.1) + 0.1).toFixed(1));
}
/* ‚ñ∂Ô∏è LOAD VIDEO */
function loadVideo() {
    if (currentVideo >= videos.length) {
        document.getElementById("earned").textContent =
            "‚úÖ All videos completed.";
        return;
    }

    const vid = videos[currentVideo];
    if (earnings.watched.includes(vid.id)) {
        currentVideo++;
        loadVideo();
        return;
    }
document.getElementById("playerArea").innerHTML =
        `<div id="player"></div>`;

    player = new YT.Player("player", {
        videoId: vid.id,
        playerVars: { autoplay: 1, controls: 0 },
        events: {
            onReady: startTimer,
            onStateChange: e => {
                if (e.data === YT.PlayerState.ENDED) rewardUser();
            }
        }
    });
}
/* ‚è±Ô∏è TIMER */
function startTimer() {
    let t = Math.floor(player.getDuration());
    const i = setInterval(() => {
        let m = Math.floor(t / 60);
        let s = t % 60;
        document.getElementById("timer").textContent =
            `‚è±Ô∏è ${m}:${s.toString().padStart(2,"0")}`;
        t--;
        if (t < 0) clearInterval(i);
    }, 1000);
}
/* üí∞ REWARD USER */
function rewardUser() {
    const vid = videos[currentVideo];
    const reward = getRandomReward();

    earnings.total += reward;
    earnings.watched.push(vid.id);
    earnings.history.push({
        title: vid.title,
        amount: reward,
        time: new Date().toLocaleString()
    });

localStorage.setItem("earningsData", JSON.stringify(earnings));
    document.getElementById("earnSound").play();

    document.getElementById("earned").innerHTML =
        `üéâ You earned ‚Ç±${reward}<br>üí∞ Total: ‚Ç±${earnings.total.toFixed(2)}`;

    updateBalance();
    renderHistory();

    currentVideo++;
    setTimeout(loadVideo, 3000);
}
/* üí≥ UPDATE BALANCE */
function updateBalance() {
    const box = document.getElementById("balanceBox");
    document.getElementById("balance").textContent =
        earnings.total.toFixed(2);

    box.classList.remove("bump");
    void box.offsetWidth;
    box.classList.add("bump");

    document.getElementById("withdrawBtn").disabled =
        earnings.total < 5;
}
/* üìä HISTORY */
function renderHistory() {
    const list = document.getElementById("historyList");
    list.innerHTML = "";
    earnings.history.forEach(h => {
        const d = document.createElement("div");
        d.className = "card";
        d.innerHTML =
            `<strong>${h.title}</strong><br>
             ‚Ç±${h.amount} ‚Äî ${h.time}`;
        list.appendChild(d);
    });
}
/* üí∏ WITHDRAW (DEMO) */
document.getElementById("withdrawBtn").onclick = () => {
    alert(`Withdraw ‚Ç±${earnings.total.toFixed(2)} successful (DEMO ONLY)`);

    earnings.total = 0;
    earnings.history.push({
        title: "Withdraw",
        amount: "-",
        time: new Date().toLocaleString()
    });

    localStorage.setItem("earningsData", JSON.stringify(earnings));
    updateBalance();
    renderHistory();
};
/* üö´ BASIC ANTI-INSPECT */
document.addEventListener("keydown", e => {
    if (e.key === "F12" || (e.ctrlKey && e.shiftKey)) {
        e.preventDefault();
    }
});
</script>

</body>
</html>