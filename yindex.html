<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Watch & Earn</title>

<style>
body{margin:0;font-family:Arial;background:#0b0b0b;color:#fff;text-align:center}
.container{max-width:900px;margin:auto;padding:20px}
#balanceBox{background:#111;padding:15px;border-radius:10px;font-size:22px;color:#00ff88}
#balanceBox.bump{animation:bump .4s ease}
@keyframes bump{0%{transform:scale(1)}50%{transform:scale(1.15)}100%{transform:scale(1)}}
input,select{padding:12px;font-size:16px;width:100%;max-width:300px}
button{padding:10px 15px;margin-top:10px;border-radius:6px;border:none;cursor:pointer}
#withdrawBtn{background:#00ff88}
#withdrawBtn:disabled{background:#555;cursor:not-allowed}
iframe{width:100%;max-width:800px;height:450px;border-radius:10px}
#timer{font-size:22px;margin-top:10px}
#earned{font-size:24px;color:#00ff88;margin-top:15px}
.progress{width:100%;max-width:800px;height:12px;background:#333;border-radius:10px;margin:10px auto;overflow:hidden}
.progress div{height:100%;width:0;background:#00ff88}
.section{margin-top:30px;text-align:left}
.card{background:#111;padding:10px;border-radius:8px;margin-bottom:8px}
.note{font-size:14px;color:#aaa}
</style>
</head>
<body>
<div class="container">

<div id="balanceBox">
üí∞ Balance: ‚Ç±<span id="balance">0.00</span><br>
<button id="withdrawBtn" disabled>üí∏ Withdraw</button>
<div class="note">Minimum withdrawal: ‚Ç±50</div>
</div>

<h2>üé¨ Watch & Earn</h2>
<div id="login">
<select id="userSelect"></select><br>
<input id="password" type="password" placeholder="Password">
</div>

<div id="playerArea"></div>
<div class="progress"><div id="progressBar"></div></div>
<div id="timer"></div>
<div id="earned"></div>
<div class="section">
<h3>üìä Earnings History</h3>
<div id="earnHistory"></div>
</div>

<div class="section">
<h3>üì§ Withdrawal History</h3>
<div id="withdrawHistory"></div>
</div>

</div>
<script src="https://www.youtube.com/iframe_api"></script>
<script>
/* USERS */
const USERS={
 user1:{password:"1234",data:null},
 user2:{password:"abcd",data:null}
};
let currentUser=null;
/* VIDEOS */
const videos=[
 {id:"dQw4w9WgXcQ",title:"sponsor1"},
{id:"JATpLtghZCY",title:"sponsor2"},
{id:"ZspGPko6-1w",title:"sponsor3"},
{id:"nLmaGOOMLr8",title:"sponsor4"},
{id:"tUMXTD8STeU",title:"sponsor5"},
 {id:"9bZkp7q19f0",title:"sponsor"}
];

let player,currentVideo=0,timerInterval;

/* LOAD USERS */
Object.keys(USERS).forEach(u=>{
 let o=document.createElement("option");
 o.value=u;o.textContent=u;
 userSelect.appendChild(o);
});
/* LOGIN */
password.addEventListener("keypress",e=>{
 if(e.key==="Enter"){
  const u=userSelect.value;
  if(password.value===USERS[u].password){
   currentUser=u;
   loadUserData();
   login.remove();
   updateBalance();
   renderHistory();
   loadVideo();
  }else alert("Wrong password");
 }
});
/* USER DATA */
function loadUserData(){
 USERS[currentUser].data=
 JSON.parse(localStorage.getItem("earn_"+currentUser))||
 {total:0,watched:[],earnHistory:[],withdrawHistory:[]};
}
function saveUserData(){
 localStorage.setItem("earn_"+currentUser,JSON.stringify(USERS[currentUser].data));
}
/* REWARD */
function getReward(){
 if(Math.random()<0.1) return 1.0;
 return parseFloat((Math.random()*(0.5-0.1)+0.1).toFixed(1));
}

/* VIDEO */
function loadVideo(){
 if(currentVideo>=videos.length){
  earned.textContent="‚úÖ All videos completed";
  return;
 }
const vid=videos[currentVideo];
 if(USERS[currentUser].data.watched.includes(vid.id)){
  currentVideo++; loadVideo(); return;
 }
 playerArea.innerHTML="<div id='player'></div>";
 player=new YT.Player("player",{
  videoId:vid.id,
  playerVars:{autoplay:1,controls:0},
  events:{
   onReady:startTimer,
   onStateChange:e=>{if(e.data===YT.PlayerState.ENDED)rewardUser();}
  }
 });
}

/* TIMER */
function startTimer(){
 let wait=setInterval(()=>{
  let d=Math.floor(player.getDuration());
  if(d>0){clearInterval(wait);runTimer(d);}
 },200);
}
function runTimer(total){
 let t=total;
 clearInterval(timerInterval);
 timerInterval=setInterval(()=>{
  let m=Math.floor(t/60),s=t%60;
  timer.textContent=`‚è±Ô∏è ${m}:${s.toString().padStart(2,"0")}`;
  progressBar.style.width=((total-t)/total*100)+"%";
  t--; if(t<0)clearInterval(timerInterval);
 },1000);
}
/* EARN */
function rewardUser(){
 const r=getReward();
 const d=USERS[currentUser].data;
 d.total+=r;
 d.watched.push(videos[currentVideo].id);
 d.earnHistory.push({title:videos[currentVideo].title,amount:r,time:new Date().toLocaleString()});
 saveUserData();
 earned.textContent=`üéâ You earned ‚Ç±${r}`;
 updateBalance();
 renderHistory();
 currentVideo++;
 setTimeout(loadVideo,3000);
}

/* BALANCE */
function updateBalance(){
 const total=USERS[currentUser].data.total;
 balance.textContent=total.toFixed(2);
 withdrawBtn.disabled=total<50;
 balanceBox.classList.remove("bump");void balanceBox.offsetWidth;
 balanceBox.classList.add("bump");
}
/* HISTORY */
function renderHistory(){
 earnHistory.innerHTML="";
 withdrawHistory.innerHTML="";
 USERS[currentUser].data.earnHistory.forEach(h=>{
  earnHistory.innerHTML+=`<div class="card">${h.title} ‚Äî ‚Ç±${h.amount}<br>${h.time}</div>`;
 });
 USERS[currentUser].data.withdrawHistory.forEach(w=>{
  withdrawHistory.innerHTML+=`<div class="card">Withdraw ‚Ç±${w.amount}<br>${w.time}</div>`;
 });
}
/* WITHDRAW */
withdrawBtn.onclick=()=>{
 const d=USERS[currentUser].data;
 if(d.total<50)return alert("Minimum withdrawal is ‚Ç±50");
 const amt=d.total;
 d.total=0;
 d.withdrawHistory.push({amount:amt,time:new Date().toLocaleString()});
 saveUserData();
 updateBalance();
 renderHistory();
 alert("Withdraw successful\n‚Ç±"+amt.toFixed(2));
};
</script>
</body>
</html>