
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Watch & Earn PH</title>
<meta name="viewport" content="width=device-width">
<meta http-equiv="refresh" content="300">

<style>
body{margin:0;font-family:Arial;background:#0b0b0b;color:#fff}
.container{max-width:900px;margin:auto;padding:20px;text-align:center}
.box{background:#111;padding:15px;border-radius:10px;margin-bottom:15px}
.green{color:#00ff88}
.lock{color:#ff6666}
button{padding:10px 15px;border:none;border-radius:6px;cursor:pointer}
button:disabled{background:#555}
input,select{padding:10px;width:100%;max-width:300px;margin:5px}
.progress{width:100%;height:12px;background:#333;border-radius:10px;overflow:hidden}
.progress div{height:100%;background:#00ff88;width:0}
.hidden{display:none}
iframe{width:100%;max-width:800px;height:450px;border-radius:10px}

</style>
</head>
<body>
<div class="container">

<div class="box">ðŸ’° Balance: â‚±<span id="balance">0.00</span></div>

<div id="login" class="box">
<select id="userSelect"></select>
<input id="password" type="password" placeholder="Enter password">
<button id="loginBtn">Login</button>
</div>
<div id="refBox" class="box hidden">
<input id="refUsername" placeholder="Username ng nag-invite">
<button id="saveRef">Save</button>
<div id="refMsg" class="green"></div>
</div>

<div id="playerArea"></div>
<div id="timer"></div>
<div id="earned" class="green"></div>

<div class="box hidden" id="guessBox">
<h3>ðŸŽ¯ Guessing Game</h3>
<p>1â€“50 | 15 minutes</p>
<input id="guessInput" type="number" min="1" max="50">
<button id="guessBtn">Guess</button>
<div id="guessHint"></div>
<div id="guessTimer" class="green"></div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
/* USERS */
const USERS={
 user1:{pass:"dipwd1234"},
 user2:{pass:"dipwdabcd"},
 Johnv:{pass:"101017"}
};

/* VIDEOS */
const VIDEO_POOL=["tUMXTD8STeU","ZspGPko6-1w","JATpLtghZCY","vJ7iZH6ILJM"];
const DAILY_LIMIT=6;

let currentUser,data,ytReady=false,player;

/* HELPERS */
const today=()=>new Date().toISOString().split("T")[0];
const rand=(a,b)=>+(Math.random()*(b-a)+a).toFixed(2);
const shuffle=a=>a.sort(()=>Math.random()-.5);

/* INIT */
window.onload=()=>{
 Object.keys(USERS).forEach(u=>{
  let o=document.createElement("option");
  o.value=u;o.textContent=u;
  userSelect.appendChild(o);
 });
 let last=localStorage.getItem("lastUser");
 if(last){userSelect.value=last;}
};

/* YT */
function onYouTubeIframeAPIReady(){
 ytReady=true;
 if(currentUser && data) loadVideo();
}
/* LOGIN */
loginBtn.onclick=()=>{
 let u=userSelect.value;
 if(password.value!==USERS[u].pass){alert("Wrong password");return;}
 currentUser=u;
 localStorage.setItem("lastUser",u);
 login.remove();
 refBox.classList.remove("hidden");
 guessBox.classList.remove("hidden");
 loadData();
resumeDaily();
 resumeGuess();
 render();
 loadVideo();
};

/* DATA */
function loadData(){
 data=JSON.parse(localStorage.getItem("user_"+currentUser))||{
  total:0,refUser:null,
  lastDate:null,dailyVideos:[],videoIndex:0,
  secret:null,guessEnd:null
 };
}
const save=()=>localStorage.setItem("user_"+currentUser,JSON.stringify(data));

/* REFERRAL */
saveRef.onclick=()=>{
 if(data.refUser)return;
 let r=rand(0.1,8);
 data.refUser=refUsername.value;
 data.total+=r;
 save();render();
 refMsg.textContent="â‚±"+r+" added";
};
/* DAILY VIDEOS */
function resumeDaily(){
 if(data.lastDate!==today()){
  data.lastDate=today();
  data.dailyVideos=shuffle([...VIDEO_POOL]).slice(0,DAILY_LIMIT);
  data.videoIndex=0;
 }
 save();
}
/* VIDEO */
function loadVideo(){
 if(!ytReady){setTimeout(loadVideo,500);return;}
 if(data.videoIndex>=data.dailyVideos.length){
  playerArea.innerHTML="ðŸ”’ Daily limit reached";
  return;
 }
 playerArea.innerHTML="<div id='player'></div>";
 player=new YT.Player("player",{
  videoId:data.dailyVideos[data.videoIndex],
  playerVars:{autoplay:1,controls:0},
  events:{onStateChange:e=>{if(e.data===0)reward();}}
 });
}
/* VIDEO REWARD */
function reward(){
 let r=rand(0.1,1);
 data.total+=r;
 data.videoIndex++;
 save();render();
 earned.textContent="â‚±"+r+" earned";
 setTimeout(loadVideo,1000);
}
/* GUESSING GAME */
function resumeGuess(){
 if(!data.secret){
  data.secret=Math.floor(Math.random()*50)+1;
  data.guessEnd=Date.now()+15*60000;
  save();
 }
 startGuessTimer();
}
function startGuessTimer(){
 setInterval(()=>{
  let r=data.guessEnd-Date.now();
  if(r<=0){guessBtn.disabled=true;guessTimer.textContent="â›” Time expired";return;}
  let m=Math.floor(r/60000),s=Math.floor(r%60000/1000);
  guessTimer.textContent=`â³ ${m}:${String(s).padStart(2,"0")}`;
 },1000);
}
guessBtn.onclick=()=>{
 let g=+guessInput.value;
 if(g===data.secret){
  let w=rand(0.1,0.5);
  data.total+=w;
guessHint.textContent="ðŸŽ‰ Correct â‚±"+w;
  data.secret=Math.floor(Math.random()*50)+1;
  data.guessEnd=Date.now()+15*60000;
 }else{
  data.total-=0.05;
  guessHint.textContent=g>data.secret?"â¬‡ Lower":"â¬† Higher";
 }
 if(data.total<=0)unlockVideos();
 save();render();
};
/* UNLOCK IF ZERO */
function unlockVideos(){
 data.total=0;
 data.dailyVideos=shuffle([...VIDEO_POOL]).slice(0,10);
 data.videoIndex=0;
 loadVideo();
}
/* RENDER */
function render(){
 balance.textContent=data.total.toFixed(2);
 if(data.refUser){
  refUsername.value=data.refUser;
  refUsername.disabled=true;
 }
}
</script>
</body>
</html>